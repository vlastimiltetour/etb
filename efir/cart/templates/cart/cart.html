{% extends 'catalog/base.html' %}
{% load static %}
{% load i18n %}
{% load humanize %}

{% block content %}



<!-- name -->
<div class="container px-4 py-5 mx-auto mb-5" style="max-width: 800px; min-height: 400px;">
  <div class="row d-flex justify-content-center">
    
      
          <h4 class="heading">Vaše objednávka</h4>
      
      
  </div>
  <!-- whole product-->

  {% if cart|length > 0%}

  <!-- first row -->


  <div class="row d-flex py-2 justify-content-center border-top">
    {% for item in cart %}
    {% with product=item.product %}
      <div class="col-2">
          <div class="row d-flex">
              <div class="book">
                  <img src="{{product.image.url}}" class="book-img" height="60px">
              </div>
            </div>
      </div>
      <div class="my-auto py-3 col-10">
          <div class="row text-right">
              <div class="col-4">
                <h6 class="mob-text">{{ product.name}} {{item.quantity}}</h6>
                <p class="mob-text"> {{ product.obvod_hrudnik}} {{ product.obvod_prsa}}</p>
                 

              </div>
              <div class="col-4">
                <div class="d-flex">
                  <div class="input-group">
                    <button class="btn btn-outline-dark rounded-0" type="button" onclick="decreaseCount()">
                      <i class="bi bi-dash"></i>
                    </button>
                    <input class="form-control text-center rounded-0" id="inputQuantity" type="num" value="1" style="max-width: 3rem; border-color: black;">
                    <button class="btn btn-outline-dark rounded-0" type="button" onclick="increaseCount()">
                      <i class="bi bi-plus"></i>
                    </button>
                  </div>
              </div>

              </div>
              <div class="col-2">    
                <form action="{% url 'cart:cart_add' product.id %}" method="post">
                {{ item.update_quantity_form.quantity }}
                {{ item.update_quantity_form.override }}



                    <input type="submit" value="Update">
                    {% csrf_token %}
                  </form>

                  <h6 class="mob-text"> {{ product.price|intcomma}} Kč</h6>


              </div>
              <div class="col-2" style="text-align: right;">
                <form action="{% url 'cart:cart_remove' product.id %}" method="post">
                 
                <button type="submit" class="btn-close" aria-label="Close">
                  {% csrf_token %}
                </button>
                </form>
              </div>
          </div>
      </div>
      <!-- second row -->
      <div class="col-5"></div>

       <div class="my-auto col-7">

          <div class="row text-right">
              
              <div class="col-4">
              
      

               

              </div>
             
          </div>
      </div>
     
      {% endwith %}
      {% endfor %}
      <div class="row d-flex py-2 justify-content-center border-top">
        <div class="row text-right" style="text-align: right;">
          
            <h6 class="mob-text">Total: {{ cart.get_total_price|intcomma}} Kč </h6>
          </div>
      </div>
  </div>
  <section class="jumbotron text-center">
    <div class="container">
     
     
        <a href="{% url 'orders:new_order' %}" type="submit" class="btn btn-dark my-2">Koupit</a>
     
    </div>
  </section>
  {% else %}
  <img src="{static 'assets/img/empty.jpeg' }" class="book-img" height="60px">

  Prozatím zde nic není. Vyberte si z katalogu.
  {% endif %}

  


</div>

<script>
  function decreaseCount() {
      var input = document.getElementById("inputQuantity");
      var value = parseInt(input.value);
      if (value > 1) {
          input.value = value - 1;
      }
  }

  function increaseCount() {
      var input = document.getElementById("inputQuantity");
      var value = parseInt(input.value);
      input.value = value + 1;
  }

</script>
{% endblock %}